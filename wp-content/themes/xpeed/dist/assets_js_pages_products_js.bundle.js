"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkxpeed"] = self["webpackChunkxpeed"] || []).push([["assets_js_pages_products_js"],{

/***/ "./assets/js/apiHandler.js":
/*!*********************************!*\
  !*** ./assets/js/apiHandler.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _loading_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./loading.js */ \"./assets/js/loading.js\");\n/* harmony import */ var _variable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./variable.js */ \"./assets/js/variable.js\");\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\nvar APIHandler = /*#__PURE__*/function () {\n  function APIHandler() {\n    _classCallCheck(this, APIHandler);\n  }\n  return _createClass(APIHandler, null, [{\n    key: \"post\",\n    value: function post(url, data) {\n      var isLoading = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      _loading_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].show(); // Hiển thị loading nếu isLoading là true\n      console.log('isLoading', isLoading);\n      return $.ajax({\n        url: this.buildUrl(url),\n        method: 'POST',\n        contentType: 'application/json',\n        data: JSON.stringify(data)\n      }).always(function () {\n        if (isLoading) _loading_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hide(); // Ẩn loading sau khi hoàn thành call API\n      });\n    }\n  }, {\n    key: \"get\",\n    value: function get(url, data) {\n      var isLoading = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      if (isLoading) _loading_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].show(); // Hiển thị loading nếu isLoading là true\n      return $.ajax({\n        url: this.buildUrl(url),\n        method: 'GET',\n        contentType: 'application/json',\n        data: JSON.stringify(data)\n      }).always(function () {\n        if (isLoading) _loading_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hide(); // Ẩn loading sau khi hoàn thành call API\n      });\n    }\n  }, {\n    key: \"buildUrl\",\n    value: function buildUrl(url) {\n      url = _variable_js__WEBPACK_IMPORTED_MODULE_1__.BASE_URL + url; // Thay thế baseUrl bằng URL cơ bản của bạn\n\n      return url;\n    }\n  }]);\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (APIHandler);\n\n//# sourceURL=webpack://xpeed/./assets/js/apiHandler.js?");

/***/ }),

/***/ "./assets/js/loading.js":
/*!******************************!*\
  !*** ./assets/js/loading.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar userLoading = /*#__PURE__*/function () {\n  function userLoading() {\n    _classCallCheck(this, userLoading);\n  }\n  return _createClass(userLoading, null, [{\n    key: \"show\",\n    value: function show() {\n      var loader = $('.wp-loading-overlay');\n      if (loader.length) {\n        loader.css('display', 'flex');\n      }\n      return true;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide(url, data) {\n      var loader = $('.wp-loading-overlay');\n      if (loader.length) {\n        loader.css('display', 'none');\n      }\n      return false;\n    }\n  }]);\n}();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (userLoading);\n\n//# sourceURL=webpack://xpeed/./assets/js/loading.js?");

/***/ }),

/***/ "./assets/js/pages/products.js":
/*!*************************************!*\
  !*** ./assets/js/pages/products.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _apiHandler_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../apiHandler.js */ \"./assets/js/apiHandler.js\");\n/* harmony import */ var _variable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../variable.js */ \"./assets/js/variable.js\");\n/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common.js */ \"./assets/js/common.js\");\n/* provided dependency */ var $ = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n// Import APIHandler\n\n\n\n$(document).ready(function () {\n  //--------------------------------------PRODUCT LIST----------------------------------\n  // các dữ liệu param\n  var categories = '';\n  var minPrice = 0;\n  var maxPrice = 0;\n  var selectedAttributes = {};\n  var page = 1;\n  var currentUrl = window.location.origin + window.location.pathname;\n  var currentParams = new URLSearchParams(window.location.search); // Phân tích query string hiện tại\n  $(\"#card__product-loading-wapper\").removeClass(\"under-active\");\n  $('#categories-select').on('change', function () {\n    var _$$val;\n    var category = (_$$val = $(this).val()) !== null && _$$val !== void 0 ? _$$val : '';\n    if (category && category != '') {\n      window.location.href = category;\n    }\n  });\n  $('input[name=\"filter.v.price.gte\"], input[name=\"filter.v.price.lte\"]').on('change', function () {\n    // Lấy giá trị của input MIN và MAX\n    minPrice = parseFloat($('input[name=\"filter.v.price.gte\"]').val()) || 0;\n    maxPrice = parseFloat($('input[name=\"filter.v.price.lte\"]').val()) || 0;\n\n    // Kiểm tra nếu Min Price lớn hơn Max Price\n    if (minPrice > maxPrice) {\n      // Hiển thị cảnh báo\n      alert('Min Price không được lớn hơn Max Price. Đặt lại giá trị về 0.');\n\n      // Đặt lại giá trị về 0\n      $('input[name=\"filter.v.price.gte\"]').val(0);\n      $('input[name=\"filter.v.price.lte\"]').val(0);\n      minPrice = maxPrice = 0;\n    } else {\n      minPrice = minPrice <= 0 ? 1 : minPrice;\n      createUrl();\n    }\n  });\n\n  // Xử lý khi checkbox được thay đổi\n  $('.attribute-checkbox').on('change', function () {\n    var groupName = $(this).attr('name'); // Nhóm thuộc tính (ví dụ: mau-sac, size)\n    var value = $(this).val(); // Giá trị của thuộc tính (ví dụ: do, l)\n    var isChecked = $(this).is(':checked'); // Trạng thái checkbox\n\n    // Nếu nhóm chưa tồn tại, khởi tạo là một mảng\n    if (!selectedAttributes[groupName]) {\n      selectedAttributes[groupName] = [];\n    }\n    if (isChecked) {\n      // Nếu được chọn, thêm giá trị vào nhóm\n      if (!selectedAttributes[groupName].includes(value)) {\n        selectedAttributes[groupName].push(value);\n      }\n    } else {\n      // Nếu bỏ chọn, xóa giá trị khỏi nhóm\n      selectedAttributes[groupName] = selectedAttributes[groupName].filter(function (attr) {\n        return attr !== value;\n      });\n    }\n    createUrl();\n  });\n  function createUrl() {\n    // 1. Lấy URL hiện tại và phân tích các tham số query\n\n    // 2. Tạo danh sách các tham số (params)\n    var params = new URLSearchParams();\n\n    // Thêm tham số `page`\n    params.set('page', page);\n\n    // Thêm `minPrice` và `maxPrice` nếu có giá trị\n    if (minPrice > 0) {\n      params.set('minPrice', minPrice);\n    }\n    if (maxPrice > 0) {\n      params.set('maxPrice', maxPrice);\n    }\n\n    // Thêm các thuộc tính đã chọn (selectedAttributes)\n    for (var key in selectedAttributes) {\n      if (selectedAttributes[key]) {\n        params.set(key, selectedAttributes[key]);\n      }\n    }\n\n    // 3. Cập nhật lại các tham số trong URL hiện tại với các tham số mới\n    currentParams.forEach(function (value, key) {\n      // Nếu tham số không có trong `params`, giữ nguyên giá trị cũ\n      if (!params.has(key)) {\n        params.set(key, value);\n      }\n    });\n\n    // 4. Ghép URL với query string đã cập nhật\n    var finalUrl = currentUrl + '?' + params.toString();\n\n    // 5. Cập nhật URL mà không tải lại trang\n    history.pushState(null, '', finalUrl);\n    callApiProductList(params);\n    return finalUrl;\n  }\n  function callApiProductList(params) {\n    _apiHandler_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(\"/wp-json/custom-api/v1/products-filter?mainCategory=\".concat(mainCategory, \"&\").concat(params)).done(function (response) {\n      $(\"#collection__content-product-wapper\").html(\"\");\n      if (response.products && response.products.length > 0) {\n        var dataProduct = response.products;\n        dataProduct.forEach(function (product) {\n          var productHtml = \"\\n                    <div class=\\\"shopify__product\\\">\\n                      <a href=\\\"\".concat(product.url, \"\\\" class=\\\"shopify__product-image-wrapper\\\">\\n                        <span class=\\\"shopify__product-badge shopify__product-badge--new\\\">\").concat(product.first_tag, \"</span>\\n                        <img src=\\\"\").concat(product.image, \"\\\" alt=\\\"\").concat(product.title, \"\\\" class=\\\"shopify__product-image\\\" />\\n                      </a>\\n\\n                      <div class=\\\"shopify__product-details\\\">\\n                        <h3 class=\\\"shopify__product-title\\\">\\n                          <a href=\\\"\").concat(product.url, \"\\\" class=\\\"shopify__product-link\\\">\").concat(product.title, \"</a>\\n                        </h3>\\n\\n                        <p class=\\\"shopify__product-cate\\\">\").concat(product.first_category, \"</p>\\n\\n                        <span class=\\\"shopify__product-price\\\">\").concat((0,_common_js__WEBPACK_IMPORTED_MODULE_2__.formatVND)(product.price), \"</span>\\n                      </div>\\n                    </div>\\n                  \");\n          $(\"#collection__content-product-wapper\").append(productHtml);\n          $(\"#card__product-loading-wapper\").addClass(\"under-active\");\n        });\n      } else {\n        Swal.fire({\n          icon: \"error\",\n          title: \"Không tìm được sản phẩm.\",\n          showConfirmButton: false,\n          timer: 3000\n        }).then(function () {\n          $(\"#collection__content-product-wapper\").html(\"Không tìm được sản phẩm\");\n        });\n      }\n    }).fail(function (err) {\n      var _err$responseJSON$mes;\n      Swal.fire({\n        icon: \"error\",\n        title: (_err$responseJSON$mes = err.responseJSON.message) !== null && _err$responseJSON$mes !== void 0 ? _err$responseJSON$mes : \"Không tìm được sản phẩm.\",\n        showConfirmButton: false,\n        timer: 3000\n      }).then(function () {\n        $(\"#collection__content-product-wapper\").html(\"Không tìm được sản phẩm\");\n      });\n    });\n  }\n});\n\n//# sourceURL=webpack://xpeed/./assets/js/pages/products.js?");

/***/ }),

/***/ "./assets/js/variable.js":
/*!*******************************!*\
  !*** ./assets/js/variable.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BASE_URL: () => (/* binding */ BASE_URL)\n/* harmony export */ });\nvar BASE_URL = \"https://xpeed-helmets.com\";\n\n//# sourceURL=webpack://xpeed/./assets/js/variable.js?");

/***/ })

}]);